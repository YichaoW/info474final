{"ast":null,"code":"var _jsxFileName = \"/Users/HowardPu/Documents/academic/info/info 474/info474final/src/Components/SelectionSort.js\";\nimport React, { Component } from 'react';\nimport * as d3 from \"d3\";\nimport { GridStructure } from './GridStructure';\nexport class SelectionSort extends GridStructure {\n  constructor(props) {\n    // 1: Grid Width 30px\n    // 2: Grid Height 30px\n    // 3: nRow: 3\n    // 4: nCol: 10\n    // 5: padding: 0.05\n    // 6: margin: top: 20px, bottom: 20px, left: 20px, right: 20px\n    super(props, 30, 30, 3, 10, 0.05, {\n      top: 20,\n      bottom: 20,\n      left: 20,\n      right: 20\n    }, \"selection\");\n    this.svg = null;\n    this.indicatorInitial = {\n      row: 3,\n      col: 10\n    };\n    this.separatorInitial = {\n      row: 1,\n      col: 2\n    };\n    this.getInitialPosition = this.getInitialPosition.bind(this);\n    this.getAction = this.getAction.bind(this);\n    this.visulizeFind = this.visulizeFind.bind(this);\n    this.visulizeMove = this.visulizeMove.bind(this);\n    let initArray = [3, 2, 6, 2, 9, 8];\n    this.state = {\n      array: initArray,\n      actions: [],\n      step: 0,\n      speed: 1\n    };\n  }\n\n  getInitialPosition(array = this.state.array) {\n    let positionMap = {};\n\n    for (let i = 0; i < array.length; i++) {\n      positionMap[i] = {\n        row: 2,\n        col: i + 3\n      };\n    }\n\n    return positionMap;\n  }\n\n  componentDidMount() {\n    this.svg = this.getSVG();\n    this.drawBasicStructure();\n    let positionMap = this.getInitialPosition();\n\n    for (let i = 0; i < this.state.array.length; i++) {\n      let position = positionMap[i];\n      let num = this.state.array[i];\n      let id = \"insertion-\" + i;\n      this.visulizeBox(position.row, position.col, 1, 1, num, id);\n    }\n\n    this.drawSeparator(this.separatorInitial.row, this.separatorInitial.col);\n    this.drawIndicator(this.indicatorInitial.row, this.indicatorInitial.col, \"min\");\n    this.drawHorizontalGrid();\n    this.drawVerticalGrid();\n    this.setState({\n      actions: this.getAction()\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.state.step > prevState.step) {\n      let action = this.state.actions[this.state.step];\n\n      if (action.desc === \"Find the Lowest #\") {\n        this.visulizeFind(action.how);\n      } else if (action.desc === \"Move the Lowest # to the End of Sorted Array\") {\n        this.visulizeMove(action.how);\n      }\n    } else if (this.state.step < prevState.step) {\n      console.log(\"--\");\n    }\n  }\n\n  visulizeFind(how) {\n    let moveAction = how[0].split(\" \");\n    let id = moveAction[1];\n    let to = moveAction[3].split(\"-\"); //console.log(to[0])\n    //console.log(to[1])\n\n    this.move(id, to[0], to[1], 0.15, 0.05, () => {\n      let selectAction = how[1];\n      this.select(selectAction.split(\" \")[1], null, 300 * this.state.speed);\n    }, 300 * this.state.speed); //console.log(moveAction)\n  }\n\n  visulizeMove(how) {\n    let indicatorMoveAction = how[0].split(\" \");\n    let indicatorID = indicatorMoveAction[1];\n    let indicatorTo = indicatorMoveAction[3].split(\"-\");\n    this.move(indicatorID, indicatorTo[0], indicatorTo[1], 0.15, 0.05, () => {\n      let elementStage1 = how[1].split(\" \");\n      let elementID = elementStage1[1];\n      let elementMove1 = elementStage1[3].split(\"-\");\n      this.move(elementID, elementMove1[0], elementMove1[1], 0.05, 0.05, () => {\n        this.rightShift(how[2], () => {\n          let separatorAction = how[3].split(\" \");\n          let sepID = separatorAction[1];\n          let newSepPosition = separatorAction[3].split(\"-\");\n          this.move(sepID, newSepPosition[0], newSepPosition[1], 0.5, 1, () => {\n            let elementStage2 = how[4].split(\" \");\n            let elementMove2 = elementStage2[3].split(\"-\");\n            this.move(elementID, elementMove2[0], elementMove2[1], 0.05, 0.05);\n            console.log(elementMove2);\n          }, 300 * this.state.speed);\n        });\n      }, 300 * this.state.speed);\n    }, 300 * this.state.speed);\n  }\n\n  getAction(array = this.state.array) {\n    let actions = [{\n      desc: \"Start Sorting\",\n      how: []\n    }];\n    let arrayMap = [];\n    let positions = this.getInitialPosition();\n    let indexes = [];\n    let indicatorRow = this.indicatorInitial.row;\n    let sepPosition = JSON.parse(JSON.stringify(this.separatorInitial));\n    console.log(sepPosition);\n\n    for (let i = 0; i < array.length; i++) {\n      indexes.push(i);\n      arrayMap.push({\n        number: array[i],\n        index: i\n      });\n    }\n\n    arrayMap = arrayMap.sort((a, b) => {\n      return a.number - b.number;\n    });\n\n    for (let i = 0; i < arrayMap.length; i++) {\n      let index = arrayMap[i].index;\n      let elementPosition = positions[index];\n      let indicatorFrom = indicatorRow + \"-\" + this.indicatorInitial.col;\n      let indicatorTo = indicatorRow + \"-\" + elementPosition.col;\n      let elementID = \"insertion-\" + index;\n      let elementInitial = elementPosition.row + \"-\" + elementPosition.col;\n      let findMin = {\n        desc: \"Find the Lowest #\",\n        how: [\"Move indicator \" + indicatorFrom + \" \" + indicatorTo, \"Select \" + elementID]\n      };\n      indexes[index] = null;\n      let shift = [];\n      let shiftPosition = null;\n\n      for (let i = 0; i < index; i++) {\n        if (indexes[i] !== null) {\n          let index = indexes[i];\n\n          if (shift.length === 0) {\n            shiftPosition = positions[index].row + \"-\" + positions[index].col;\n          }\n\n          positions[index].col++;\n          shift.push(\"insertion-\" + index);\n        }\n      }\n\n      let sepCur = sepPosition.row + \"-\" + sepPosition.col;\n      sepPosition.col++;\n      let elementStage1 = elementPosition.row + 1 + \"-\" + elementPosition.col;\n      let elementNewCol = sepPosition.col;\n      let elementStage2 = elementPosition.row + 1 + \"-\" + elementNewCol;\n      let elementStage3 = elementPosition.row + \"-\" + elementNewCol;\n      let sepNext = sepPosition.row + \"-\" + sepPosition.col;\n      let move = {\n        desc: \"Move the Lowest # to the End of Sorted Array\",\n        how: [\"Move indicator \" + indicatorTo + \" \" + indicatorFrom, \"Move \" + elementID + \" \" + elementInitial + \" \" + elementStage1, \"Shift \" + shift + \" \" + shiftPosition, \"Move separator \" + sepCur + \" \" + sepNext, \"Move \" + elementID + \" \" + elementStage1 + \" \" + elementStage2, \"Move \" + elementID + \" \" + elementStage2 + \" \" + elementStage3]\n      };\n      actions.push(findMin);\n      actions.push(move);\n    }\n\n    actions.push({\n      desc: \"Sort Finished\",\n      how: []\n    });\n    return actions;\n  }\n\n  render() {\n    let actionDisplay = \"Finding Algorithm\";\n\n    if (this.state.actions.length > 0) {\n      actionDisplay = this.state.actions[this.state.step].desc;\n    }\n\n    return React.createElement(\"div\", {\n      id: \"selection\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, actionDisplay), React.createElement(\"button\", {\n      onClick: () => {\n        if (this.state.step < this.state.actions.length - 1) {\n          this.setState({\n            step: this.state.step + 1\n          });\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, \"Next\"), React.createElement(\"button\", {\n      onClick: () => {\n        if (this.state.step > 0) {\n          this.setState({\n            step: this.state.step - 1\n          });\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, \"Prev\"));\n  }\n\n}","map":{"version":3,"sources":["/Users/HowardPu/Documents/academic/info/info 474/info474final/src/Components/SelectionSort.js"],"names":["React","Component","d3","GridStructure","SelectionSort","constructor","props","top","bottom","left","right","svg","indicatorInitial","row","col","separatorInitial","getInitialPosition","bind","getAction","visulizeFind","visulizeMove","initArray","state","array","actions","step","speed","positionMap","i","length","componentDidMount","getSVG","drawBasicStructure","position","num","id","visulizeBox","drawSeparator","drawIndicator","drawHorizontalGrid","drawVerticalGrid","setState","componentDidUpdate","prevProps","prevState","action","desc","how","console","log","moveAction","split","to","move","selectAction","select","indicatorMoveAction","indicatorID","indicatorTo","elementStage1","elementID","elementMove1","rightShift","separatorAction","sepID","newSepPosition","elementStage2","elementMove2","arrayMap","positions","indexes","indicatorRow","sepPosition","JSON","parse","stringify","push","number","index","sort","a","b","elementPosition","indicatorFrom","elementInitial","findMin","shift","shiftPosition","sepCur","elementNewCol","elementStage3","sepNext","render","actionDisplay"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as d3 from \"d3\";\nimport {GridStructure} from './GridStructure'\n\n\nexport class SelectionSort extends GridStructure {\n    constructor(props) {\n        // 1: Grid Width 30px\n        // 2: Grid Height 30px\n        // 3: nRow: 3\n        // 4: nCol: 10\n        // 5: padding: 0.05\n        // 6: margin: top: 20px, bottom: 20px, left: 20px, right: 20px\n\n\n        super(props, 30, 30, 3, 10, 0.05, {\n            top: 20, bottom: 20, left: 20, right: 20\n        }, \"selection\")\n\n        this.svg = null;\n\n        this.indicatorInitial = {\n            row: 3,\n            col: 10\n        }\n\n        this.separatorInitial = {\n            row: 1,\n            col: 2\n        }\n\n        this.getInitialPosition = this.getInitialPosition.bind(this);\n        this.getAction = this.getAction.bind(this);\n        this.visulizeFind = this.visulizeFind.bind(this);\n        this.visulizeMove = this.visulizeMove.bind(this);\n\n        let initArray = [3, 2, 6, 2, 9, 8]\n\n        this.state = {\n            array: initArray,\n            actions: [],\n            step: 0,\n            speed: 1    \n        }\n    }\n\n    getInitialPosition(array = this.state.array) {\n        let positionMap = {}\n        for (let i = 0; i < array.length; i++) {\n            positionMap[i] = {\n                row: 2,\n                col: i + 3\n            }\n        } \n        return(positionMap)\n    }\n\n    componentDidMount() {\n        this.svg = this.getSVG();\n        this.drawBasicStructure();\n\n        let positionMap = this.getInitialPosition();\n\n        for (let i = 0; i < this.state.array.length; i++) {\n            let position = positionMap[i]\n            let num = this.state.array[i]\n            let id = \"insertion-\" + i\n            this.visulizeBox(position.row, position.col, 1, 1, num, id)\n        }\n\n        this.drawSeparator(this.separatorInitial.row, this.separatorInitial.col);\n        this.drawIndicator(this.indicatorInitial.row, this.indicatorInitial.col, \"min\");\n        this.drawHorizontalGrid()\n        this.drawVerticalGrid();\n\n        this.setState({\n            actions: this.getAction()\n        })\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (this.state.step > prevState.step) {\n            let action = this.state.actions[this.state.step];\n            if (action.desc === \"Find the Lowest #\") {\n                this.visulizeFind(action.how)\n            } else if (action.desc === \"Move the Lowest # to the End of Sorted Array\") {\n                this.visulizeMove(action.how)\n            }\n        } else if (this.state.step < prevState.step) {\n            console.log(\"--\")\n        }   \n    }\n\n    visulizeFind(how) {\n        let moveAction = how[0].split(\" \")        \n\n        let id = moveAction[1]\n        let to = moveAction[3].split(\"-\")\n\n        //console.log(to[0])\n        //console.log(to[1])\n        this.move(id, to[0], to[1], 0.15, 0.05, () => {\n            let selectAction = how[1]\n            this.select(selectAction.split(\" \")[1], null, 300 * this.state.speed)\n        }, 300 * this.state.speed)\n\n        //console.log(moveAction)\n    }\n\n    visulizeMove(how) {\n        let indicatorMoveAction = how[0].split(\" \");\n        let indicatorID = indicatorMoveAction[1];\n        let indicatorTo = indicatorMoveAction[3].split(\"-\")\n        this.move(indicatorID, indicatorTo[0], indicatorTo[1], 0.15, 0.05, () => {\n            let elementStage1 = how[1].split(\" \")\n            let elementID = elementStage1[1]\n            let elementMove1 = elementStage1[3].split(\"-\")\n            this.move(elementID, elementMove1[0], elementMove1[1], 0.05, 0.05, () => {\n                this.rightShift(how[2], () => {\n                    let separatorAction = how[3].split(\" \")\n                    let sepID = separatorAction[1]\n                    let newSepPosition = separatorAction[3].split(\"-\")\n                    this.move(sepID, newSepPosition[0], newSepPosition[1], 0.5, 1, () => {\n                        let elementStage2 = how[4].split(\" \")\n                        let elementMove2 = elementStage2[3].split(\"-\")\n                        this.move(elementID, elementMove2[0], elementMove2[1], 0.05, 0.05)\n                        console.log(elementMove2)\n                    }, 300 * this.state.speed)\n                })\n            }, 300 * this.state.speed)\n\n        }, 300 * this.state.speed)\n    }\n\n    getAction(array = this.state.array) {\n        let actions = [{\n            desc: \"Start Sorting\",\n            how: []\n        }];\n        let arrayMap = [];\n        let positions = this.getInitialPosition();\n        let indexes = [];\n        let indicatorRow = this.indicatorInitial.row;\n\n        let sepPosition = JSON.parse(JSON.stringify(this.separatorInitial));\n        console.log(sepPosition)\n\n        for (let i = 0; i < array.length; i++) {\n            indexes.push(i);\n            arrayMap.push({\n                number: array[i],\n                index: i\n            })\n        }\n\n        arrayMap = arrayMap.sort((a, b) => {\n            return a.number - b.number;\n        })\n        \n        for (let i = 0; i < arrayMap.length; i++) {\n            let index = arrayMap[i].index;\n            let elementPosition = positions[index]\n\n            let indicatorFrom = indicatorRow + \"-\" + this.indicatorInitial.col;\n            let indicatorTo = indicatorRow + \"-\" + elementPosition.col;\n\n            let elementID = \"insertion-\" + index\n            let elementInitial = elementPosition.row + \"-\" + elementPosition.col;\n\n            let findMin = {\n                desc: \"Find the Lowest #\",\n                how: [\"Move indicator \" + indicatorFrom + \" \" + indicatorTo, \n                        \"Select \" + elementID]\n            }\n\n            indexes[index] = null;\n\n            let shift = [];\n\n            let shiftPosition = null\n\n            for (let i = 0; i < index; i++) {\n                if (indexes[i] !== null) {\n                    let index = indexes[i];\n                    if (shift.length === 0) {\n                        shiftPosition = positions[index].row + \"-\" + positions[index].col\n                    }\n                    positions[index].col++;\n                    shift.push(\"insertion-\" + index);\n                }\n            }\n\n\n            let sepCur = sepPosition.row + \"-\" + sepPosition.col;\n            sepPosition.col++;\n\n            let elementStage1 = (elementPosition.row + 1) + \"-\" + elementPosition.col;\n            let elementNewCol = sepPosition.col;\n            let elementStage2 = (elementPosition.row + 1) + \"-\" + elementNewCol;\n            let elementStage3 = elementPosition.row + \"-\" + elementNewCol;\n\n            let sepNext = sepPosition.row + \"-\" + sepPosition.col;\n\n            let move = {\n                desc: \"Move the Lowest # to the End of Sorted Array\",\n                how:[\"Move indicator \" + indicatorTo + \" \" + indicatorFrom,\n                     \"Move \" + elementID + \" \" + elementInitial + \" \" + elementStage1,\n                     \"Shift \" + shift + \" \" + shiftPosition,\n                     \"Move separator \" + sepCur + \" \" + sepNext,\n                     \"Move \" + elementID + \" \" + elementStage1 + \" \" + elementStage2,\n                     \"Move \" + elementID + \" \" + elementStage2 + \" \" + elementStage3\n                ]\n            }\n            actions.push(findMin);\n            actions.push(move);\n        }\n\n        actions.push({\n            desc: \"Sort Finished\",\n            how: []\n        })\n\n        return(actions)\n    }\n\n    render() {\n\n        let actionDisplay = \"Finding Algorithm\"\n\n        if (this.state.actions.length > 0) {\n            actionDisplay = this.state.actions[this.state.step].desc;\n        }\n\n        return(\n            <div id=\"selection\">\n                <div>{actionDisplay}</div>\n                <button onClick={() => {\n                    if (this.state.step < this.state.actions.length - 1) {\n                        this.setState({\n                            step: this.state.step + 1\n                        })\n                    }\n                }} >Next</button>\n                <button onClick={() => {\n                    if (this.state.step > 0) {\n                        this.setState({\n                            step: this.state.step - 1\n                        })\n                    }\n                }} >Prev</button>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}