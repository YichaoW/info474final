{"ast":null,"code":"import React, { Component } from 'react';\nimport * as d3 from \"d3\";\nexport class GridStructure extends Component {\n  constructor(props, gridWidth, gridHeight, rows, cols, padding, margin, id) {\n    super(props);\n    this.gridWidth = gridWidth;\n    this.gridHeight = gridHeight;\n    this.nRow = rows;\n    this.nCol = cols;\n    this.width = this.gridWidth * this.nCol;\n    this.height = this.gridHeight * this.nRow;\n    this.padding = padding;\n    this.margin = margin;\n    this.id = id;\n    this.drawLine = this.drawLine.bind(this);\n    this.visulizeBox = this.visulizeBox.bind(this);\n    this.drawBasicStructure = this.drawBasicStructure.bind(this);\n    this.generateRandomArray = this.generateRandomArray.bind(this);\n    this.getX = this.getX.bind(this);\n    this.getY = this.getY.bind(this);\n    this.getSVG = this.getSVG.bind(this);\n    this.drawVerticalGrid = this.drawVerticalGrid.bind(this);\n    this.drawHorizontalGrid = this.drawHorizontalGrid.bind(this);\n    this.drawSeparator = this.drawSeparator.bind(this);\n    this.drawIndicator = this.drawIndicator.bind(this);\n    this.select = this.select.bind(this);\n    this.deselect = this.deselect.bind(this);\n    this.sorted = this.sorted.bind(this);\n    this.move = this.move.bind(this);\n    this.shift = this.shift.bind(this);\n  }\n\n  drawLine(x1, y1, x2, y2, color = \"gray\") {\n    this.svg.append(\"line\").style(\"stroke\", color).attr(\"x1\", this.getX(x1)).attr(\"y1\", this.getY(y1)).attr(\"x2\", this.getX(x2)).attr(\"y2\", this.getY(y2));\n  }\n\n  drawBasicStructure() {\n    this.drawLine(0, 0, this.width, 0);\n    this.drawLine(0, this.height, this.width, this.height);\n    this.drawLine(0, 0, 0, this.height);\n    this.drawLine(this.width, 0, this.width, this.height);\n  }\n\n  drawHorizontalGrid() {\n    for (let i = 1; i <= this.nRow - 1; i++) {\n      this.drawLine(0, i * this.height / this.nRow, this.width, i * this.height / this.nRow);\n    }\n  }\n\n  drawVerticalGrid() {\n    for (let i = 1; i <= this.nCol - 1; i++) {\n      this.drawLine(i * this.width / this.nCol, 0, i * this.width / this.nCol, this.height);\n    }\n  }\n\n  drawSeparator(row, col, id) {\n    let x = this.gridWidth * col;\n    let y = (row - 0.5) * this.gridHeight;\n    let sep = this.svg.append(\"g\").attr(\"id\", \"separator-\" + id).attr(\"transform\", \"translate(\" + this.getX(x) + \", \" + this.getY(y) + \")\");\n    sep.append(\"line\").attr(\"x1\", 0).attr(\"y1\", 0).attr(\"x2\", 0).attr(\"y2\", 1.5 * this.gridHeight).style(\"stroke\", \"gray\");\n    sep.append(\"line\").attr(\"x1\", 0).attr(\"y1\", 0.45 * this.gridHeight).attr(\"x2\", 1.7 * this.gridHeight).attr(\"y2\", 0.45 * this.gridHeight).style(\"stroke\", \"gray\");\n    sep.append(\"text\").attr(\"fill\", \"gray\") //.style(\"text-anchor\", \"middle\")\n    //.style(\"alignment-baseline\", \"central\")\n    .attr(\"font-size\", \"0.9rem\").attr(\"dy\", 0.4 * this.gridHeight).attr(\"dx\", 0.05 * this.gridWidth).text(\"Unsort\");\n  }\n\n  drawIndicator(row, col, text = null, id) {\n    let padding = 0.05;\n    let topAdditional = 0.1;\n    let x = (col + padding - 1) * this.gridWidth;\n    let y = (row + padding - 1 + topAdditional) * this.gridHeight;\n    let indicator = this.svg.append(\"g\").attr(\"id\", \"indicator-\" + id).attr(\"transform\", \"translate(\" + this.getX(x) + \", \" + this.getY(y) + \")\");\n    indicator.append(\"line\").attr(\"x1\", 0).attr(\"y1\", (0.5 - padding) * this.gridHeight).attr(\"x2\", (0.5 - padding) * this.gridWidth).attr(\"y2\", 0).style(\"stroke\", \"gray\");\n    indicator.append(\"line\").attr(\"x1\", (0.5 - padding) * this.gridWidth).attr(\"y1\", 0).attr(\"x2\", (1 - 2 * padding) * this.gridWidth).attr(\"y2\", (0.5 - padding) * this.gridHeight).style(\"stroke\", \"gray\");\n\n    if (text) {\n      indicator.append(\"text\").attr(\"fill\", \"gray\").style(\"text-anchor\", \"middle\").style(\"alignment-baseline\", \"central\").attr(\"font-size\", \"0.7rem\").attr(\"dy\", (0.5 - padding) * this.gridHeight).attr(\"dx\", (0.5 - padding) * this.gridWidth).text(text);\n    }\n  }\n\n  select(id, callback = null, duration) {\n    if (callback) {\n      d3.select(\"#\" + id + \" > rect\").transition().duration(duration).attr(\"fill\", \"blue\").on(\"end\", callback);\n    } else {\n      d3.select(\"#\" + id + \" > rect\").transition().duration(duration).attr(\"fill\", \"blue\");\n    }\n  }\n\n  deselect(id, callback = null, duration = 500) {\n    if (callback) {\n      d3.select(\"#\" + id + \" > rect\").transition().duration(duration).attr(\"fill\", \"gray\").on(\"end\", callback);\n    } else {\n      d3.select(\"#\" + id + \" > rect\").transition().duration(duration).attr(\"fill\", \"gray\");\n    }\n  }\n\n  sorted(id, duration) {\n    d3.select(\"#\" + id + \" > rect\").transition().duration(duration).attr(\"fill\", \"green\");\n  }\n\n  move(id, row, col, yPadding = 0.05, xPadding = 0.05, callback = null, duration = 500) {\n    let newX = this.gridWidth * (+col - 1 + xPadding);\n    let newY = this.gridHeight * (+row - 1 + yPadding);\n\n    if (callback) {\n      d3.select(\"#\" + id).transition().duration(duration).attr(\"transform\", \"translate(\" + this.getX(newX) + \", \" + this.getY(newY) + \")\").on(\"end\", callback);\n    } else {\n      d3.select(\"#\" + id).transition().duration(duration).attr(\"transform\", \"translate(\" + this.getX(newX) + \", \" + this.getY(newY) + \")\");\n    }\n  }\n\n  shift(shift, callback = null, duration = 500, direction) {\n    let shiftSplit = shift.split(/[\\ ]+/);\n    let elements = shiftSplit[1];\n\n    if (elements === \"null\") {\n      callback();\n    } else {\n      let elementsSplit = elements.split(\",\");\n      let firstPosition = shiftSplit[2].split(\"-\");\n\n      for (let i = 0; i < elementsSplit.length; i++) {\n        let elementID = elementsSplit[i];\n        let next = null;\n\n        if (i === elementsSplit.length - 1) {\n          next = callback;\n        }\n\n        this.move(elementID, firstPosition[0], +firstPosition[1] + i + direction, 0.05, 0.05, next, duration);\n      }\n    }\n  }\n\n  visulizeBox(row, col, widthGrid, heightGrid, text, id, boxColor = \"gray\", textColor = \"white\") {\n    let width = (1 - 2 * this.padding) * this.gridWidth * widthGrid;\n    let height = (1 - 2 * this.padding) * this.gridHeight * heightGrid;\n    let x = (col - 1 + this.padding) * this.gridWidth;\n    let y = (row - 1 + this.padding) * this.gridHeight;\n    let rectGroup = this.svg.append(\"g\").attr(\"id\", id).attr(\"transform\", \"translate(\" + this.getX(x) + \", \" + this.getY(y) + \")\");\n    let textX = (0.5 - this.padding) * this.gridWidth * widthGrid;\n    let textY = (0.5 - this.padding) * this.gridHeight * heightGrid;\n    let textSize = 1 + \"rem\";\n    rectGroup.append(\"rect\").attr(\"rx\", 5).attr(\"ry\", 5).attr(\"width\", width).attr(\"height\", height).attr(\"fill\", boxColor);\n    rectGroup.append(\"text\").attr(\"fill\", textColor).style(\"text-anchor\", \"middle\").style(\"alignment-baseline\", \"central\").attr(\"font-size\", textSize).attr(\"dy\", textY).attr(\"dx\", textX).text(text);\n  }\n\n  getX(x) {\n    return x + this.margin.left;\n  }\n\n  getY(y) {\n    return y + this.margin.top;\n  }\n\n  getSVG() {\n    let svg = d3.select(\"#\" + this.id).append(\"svg\").attr(\"width\", this.width + this.margin.left + this.margin.right).attr(\"height\", this.height + this.margin.top + this.margin.bottom);\n    return svg;\n  }\n\n  generateRandomArray(minLength, maxLength) {\n    let length = Math.floor(Math.random() * (maxLength - minLength) + minLength);\n    let newArray = [];\n\n    for (let i = 0; i < length; i++) {\n      newArray[i] = Math.floor(Math.random() * 20);\n    }\n\n    return newArray;\n  }\n\n}","map":{"version":3,"sources":["/Users/HowardPu/Documents/academic/info/info 474/info474final/src/Components/GridStructure.js"],"names":["React","Component","d3","GridStructure","constructor","props","gridWidth","gridHeight","rows","cols","padding","margin","id","nRow","nCol","width","height","drawLine","bind","visulizeBox","drawBasicStructure","generateRandomArray","getX","getY","getSVG","drawVerticalGrid","drawHorizontalGrid","drawSeparator","drawIndicator","select","deselect","sorted","move","shift","x1","y1","x2","y2","color","svg","append","style","attr","i","row","col","x","y","sep","text","topAdditional","indicator","callback","duration","transition","on","yPadding","xPadding","newX","newY","direction","shiftSplit","split","elements","elementsSplit","firstPosition","length","elementID","next","widthGrid","heightGrid","boxColor","textColor","rectGroup","textX","textY","textSize","left","top","right","bottom","minLength","maxLength","Math","floor","random","newArray"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as d3 from \"d3\";\n\nexport class GridStructure extends Component {\n    constructor(props, gridWidth, gridHeight, rows, cols, padding, margin, id) {\n        super(props)\n\n        this.gridWidth = gridWidth;\n\n        this.gridHeight = gridHeight;\n        this.nRow = rows;\n        this.nCol = cols;\n        this.width = this.gridWidth * this.nCol;\n        this.height = this.gridHeight * this.nRow;\n        this.padding = padding;\n        this.margin = margin\n        this.id = id;\n        \n        this.drawLine = this.drawLine.bind(this);\n        this.visulizeBox = this.visulizeBox.bind(this);\n        this.drawBasicStructure = this.drawBasicStructure.bind(this);\n        this.generateRandomArray = this.generateRandomArray.bind(this);\n\n        this.getX = this.getX.bind(this);\n        this.getY = this.getY.bind(this);\n        this.getSVG = this.getSVG.bind(this);\n\n\n        this.drawVerticalGrid = this.drawVerticalGrid.bind(this);\n        this.drawHorizontalGrid = this.drawHorizontalGrid.bind(this);\n        this.drawSeparator = this.drawSeparator.bind(this);\n        this.drawIndicator = this.drawIndicator.bind(this);\n\n\n        this.select = this.select.bind(this)\n        this.deselect = this.deselect.bind(this);\n        this.sorted = this.sorted.bind(this);\n        this.move = this.move.bind(this);\n        this.shift = this.shift.bind(this);\n    }\n\n    drawLine(x1, y1, x2, y2, color = \"gray\") {\n        this.svg.append(\"line\").style(\"stroke\", color)\n                        .attr(\"x1\", this.getX(x1)).attr(\"y1\", this.getY(y1))\n                        .attr(\"x2\", this.getX(x2)).attr(\"y2\", this.getY(y2))\n    }\n\n    drawBasicStructure() {\n        this.drawLine(0, 0, this.width, 0)\n        this.drawLine(0, this.height, this.width, this.height)\n        this.drawLine(0, 0, 0, this.height)\n        this.drawLine(this.width, 0, this.width, this.height)\n    }\n\n    drawHorizontalGrid() {\n        for (let i = 1; i <= this.nRow - 1; i++) {\n            this.drawLine(0, i * this.height / this.nRow, this.width, i * this.height / this.nRow)\n        }\n    }\n\n    drawVerticalGrid() {\n        for (let i = 1; i <= this.nCol - 1; i++) {\n            this.drawLine(i * this.width / this.nCol, 0, i * this.width / this.nCol, this.height)\n        }\n    }\n\n    drawSeparator(row, col, id) {\n        let x = this.gridWidth * col;\n        let y = (row - 0.5) * this.gridHeight;\n\n        let sep = this.svg.append(\"g\").attr(\"id\", \"separator-\" + id)\n                    .attr(\"transform\", \"translate(\" + this.getX(x) + \", \" + this.getY(y) + \")\")\n        \n        sep.append(\"line\").attr(\"x1\", 0)\n                          .attr(\"y1\", 0)\n                          .attr(\"x2\", 0)\n                          .attr(\"y2\", 1.5 * this.gridHeight)\n                          .style(\"stroke\", \"gray\")\n        \n        sep.append(\"line\").attr(\"x1\", 0)\n                          .attr(\"y1\", 0.45 * this.gridHeight)\n                          .attr(\"x2\", 1.7 * this.gridHeight)\n                          .attr(\"y2\", 0.45 * this.gridHeight)\n                          .style(\"stroke\", \"gray\")\n\n\n        sep.append(\"text\").attr(\"fill\", \"gray\")\n                          //.style(\"text-anchor\", \"middle\")\n                          //.style(\"alignment-baseline\", \"central\")\n                          .attr(\"font-size\", \"0.9rem\")\n                          .attr(\"dy\", 0.4 * this.gridHeight)\n                          .attr(\"dx\", 0.05 * this.gridWidth)\n                          .text(\"Unsort\")\n\n        \n    }\n\n    drawIndicator(row, col, text = null, id) {\n        let padding = 0.05;\n\n        let topAdditional = 0.1\n\n        let x = (col + padding - 1) * this.gridWidth; \n        let y = (row + padding - 1 + topAdditional) * this.gridHeight;\n\n        let indicator = this.svg.append(\"g\").attr(\"id\", \"indicator-\" + id)\n                            .attr(\"transform\", \"translate(\" + this.getX(x) + \", \" + this.getY(y) + \")\")\n        \n        indicator.append(\"line\").attr(\"x1\", 0)\n                            .attr(\"y1\", (0.5 - padding) * this.gridHeight)\n                            .attr(\"x2\", (0.5 - padding) * this.gridWidth)\n                            .attr(\"y2\", 0)\n                            .style(\"stroke\", \"gray\")\n        \n        indicator.append(\"line\").attr(\"x1\", (0.5 - padding) * this.gridWidth)\n                            .attr(\"y1\", 0)\n                            .attr(\"x2\", (1 - 2 * padding) * this.gridWidth)\n                            .attr(\"y2\", (0.5 - padding) * this.gridHeight)\n                            .style(\"stroke\", \"gray\")\n        \n        if (text) {\n            indicator.append(\"text\").attr(\"fill\", \"gray\")\n                    .style(\"text-anchor\", \"middle\")\n                    .style(\"alignment-baseline\", \"central\")\n                    .attr(\"font-size\", \"0.7rem\")\n                    .attr(\"dy\", (0.5 - padding) * this.gridHeight)\n                    .attr(\"dx\", (0.5 - padding) * this.gridWidth)\n                    .text(text)\n        }\n\n    }\n\n    select(id, callback = null, duration) {\n        if (callback) {\n            d3.select(\"#\" + id + \" > rect\").transition().duration(duration).attr(\"fill\", \"blue\").on(\"end\", callback)\n        } else {\n            d3.select(\"#\" + id + \" > rect\").transition().duration(duration).attr(\"fill\", \"blue\")\n        }\n    }\n\n    deselect(id, callback = null, duration = 500) {\n        if (callback) {\n            d3.select(\"#\" + id + \" > rect\").transition().duration(duration).attr(\"fill\", \"gray\").on(\"end\", callback)\n        } else {\n            d3.select(\"#\" + id + \" > rect\").transition().duration(duration).attr(\"fill\", \"gray\")\n        }\n    }\n\n    sorted(id, duration) {\n        d3.select(\"#\" + id + \" > rect\").transition().duration(duration).attr(\"fill\", \"green\")\n    }\n\n    move(id, row, col, yPadding = 0.05, xPadding = 0.05, callback = null, duration = 500) {\n        let newX = this.gridWidth * (+col - 1 + xPadding)\n        let newY = this.gridHeight * (+row - 1 + yPadding)\n\n        if (callback) {\n            d3.select(\"#\" + id).transition().duration(duration)\n                .attr(\"transform\", \"translate(\" + this.getX(newX) + \", \" + this.getY(newY) + \")\")\n                .on(\"end\", callback)\n        } else {\n            d3.select(\"#\" + id).transition().duration(duration)\n                .attr(\"transform\", \"translate(\" + this.getX(newX) + \", \" + this.getY(newY) + \")\")\n        }        \n    }\n\n    shift(shift, callback = null, duration = 500, direction) {\n        let shiftSplit = shift.split(/[\\ ]+/)\n        let elements = shiftSplit[1]\n        if (elements === \"null\") {\n            callback();\n        } else {\n            let elementsSplit = elements.split(\",\")\n            let firstPosition = shiftSplit[2].split(\"-\")\n            for (let i = 0; i < elementsSplit.length; i++) {\n                let elementID = elementsSplit[i]\n                let next = null;\n                if (i === elementsSplit.length - 1) {\n                    next = callback;\n                }\n                this.move(elementID, firstPosition[0], +firstPosition[1] + i + direction, \n                                0.05, 0.05, next, duration)\n            }\n        }\n    } \n\n    visulizeBox(row, col, widthGrid, heightGrid, text, id, boxColor = \"gray\", textColor = \"white\") {\n        let width = (1 - 2 * this.padding) * this.gridWidth * widthGrid;\n        let height = (1 - 2 * this.padding) * this.gridHeight * heightGrid;\n        let x = (col - 1 + this.padding) * this.gridWidth;\n        let y = (row - 1 + this.padding) * this.gridHeight;\n\n        let rectGroup = this.svg.append(\"g\")\n            .attr(\"id\", id)\n            .attr(\"transform\", \"translate(\" + this.getX(x) + \", \" + this.getY(y) + \")\")\n\n        let textX = (0.5 - this.padding) * this.gridWidth * widthGrid;\n        let textY = (0.5 - this.padding) * this.gridHeight * heightGrid; \n        let textSize = 1 + \"rem\";\n\n        rectGroup.append(\"rect\")\n                .attr(\"rx\", 5).attr(\"ry\", 5)\n                .attr(\"width\", width).attr(\"height\", height).attr(\"fill\", boxColor)\n        \n        rectGroup.append(\"text\").attr(\"fill\", textColor)\n                    .style(\"text-anchor\", \"middle\")\n                    .style(\"alignment-baseline\", \"central\")\n                    .attr(\"font-size\", textSize)\n                    .attr(\"dy\", textY)\n                    .attr(\"dx\", textX)\n                    .text(text)\n    }\n\n    getX(x) {\n        return(x + this.margin.left);\n    }\n\n    getY(y) {\n        return(y + this.margin.top)\n    }\n\n    getSVG() {\n        let svg = d3.select(\"#\" + this.id).append(\"svg\")\n                    .attr(\"width\", this.width + this.margin.left + this.margin.right)\n                    .attr(\"height\", this.height + this.margin.top + this.margin.bottom);\n        return(svg)\n    }\n\n    generateRandomArray(minLength, maxLength) {\n        let length = Math.floor(Math.random() * (maxLength - minLength) + minLength)\n        let newArray = []\n        for (let i = 0; i < length; i++) {\n            newArray[i] = Math.floor(Math.random() * 20)\n        }\n        return(newArray);\n    }\n}"]},"metadata":{},"sourceType":"module"}